# obsidian-workflowy-plugin

## v1.0：
大纲视图用法（右上角更多菜单切换视图）：

1、顶部导航栏，聚焦后可以点击切节点，搜索栏搜索内容高亮节点，主题12个

2、基本格式：4个空格为一个tab缩进，如果不是四个就不渲染，要求是 - 开头，类似logseq那种md格式

3、点击操作：

- 左侧垂直线可以折叠展开节点
- 点击圆圈进入聚焦模式
- 节点按住鼠标左键，往上/往下滑多选节点，按Ctrl键可以多选间隔的节点

4、快捷键：
- enter创建新节点、tab / shift+tab缩进/取消缩进
- ctrl+enter 进入任务，再按一次就完成，完成后节点下方的节点会变灰色
- ctrl+shift+方向键上/下，移动节点
- 按alt+方向键上/下聚焦模式
- shift+tab节点内换行
- ctrl+backspace 清空节点内容

## v1.1：
1、非`- `开头的数据处理，目前是调用obsidian API markdownrenderer直接渲染出来显示，内容仅可读，不可编辑

2、支持双链面板跳转，左上角前进返回

## v1.2：
1、实时预览（类似logseq）

2、插件可以配置：源码模式（之前的功能）、实时预览模式

## v1.3：
修复：

1、Live Preview 模式下 Backspace 无法删除整个节点的问题

2、Live Preview 模式和源码模式存在拖拽节点后，垂直线未能正确渲染问题

3、修复内存泄漏问题，改善性能

## v1.4：
修复：

1、子节点未能跟随父级节点TAB、SHIFT+TAB

2、多选节点TAB、SHIFT+TAB，未能跟随层级

3、TAB键缩进逻辑错误

4、修复多选节点TAB、SHIFT+TAB键缩进逻辑错误

5、源码模式和Live Preview模式，Enter键闪烁问题（重渲染）

6、Live Preview编辑层按住鼠标左键上下拖拽选节点导致节点全选，限定显示层拖拽选多选节点

7、源码模式和Live Preview模式下编辑节点视口/滚动位置跳动

8、操作节点的Console错误

9、保存初始状态作为撤销底线，止于从 Markdown 进入 Workflowy 视图时的初始状态，避免多次按Ctrl+Z进入构造函数中的空状态

## v1.5：
- 修复标签点击搜索、图片和双链`![[]]`的渲染
- 修复嵌入内容点击跳转，增加右上角点击跳转的双向箭头图标按钮
- 嵌入内容适配各类主题样式

## v1.6：
- 修复嵌入内容导致后续大纲节点垂直线渲染问题
- 异步嵌入（图片[含PDF++]/Dataview/Excalidraw/BASE/Canvas等）且内容未变的块，复用其DOM元素，避免异步嵌入重新加载导致的高度变化和页面闪烁
- 添加Excalidraw图片的双向箭头图标按钮，支持Excalidraw图片的双击事件处理
- 修复大纲节点以```开头代码块的缩进丢失问题
- 使用AbstractInputSuggest用于输入框双链输入[[]]的建议，含`#`和`^`块引用
- 优化拖拽事件处理，区分文本选择拖拽（当前节点内） vs 块拖拽（跨节点），阻止无效拖拽——当文本选择拖拽离开当前节点时
- 修复窗口resize、侧边栏展开/收起等重新渲染垂直线
